var chai   = require("chai");
var expect = chai.expect;
var gretro = require("../");

var $$ = 15;
var __ =  0;

describe("color", function() {
  var canvas = null;

  beforeEach(function() {
    canvas = new gretro.Canvas(8, 8);
  });

  it("monotone", function() {
    canvas.clear($$);

    expect(canvas.toIndexedColor()).to.eql(new Uint8Array([
      $$,$$,$$,$$,$$,$$,$$,$$,
      $$,$$,$$,$$,$$,$$,$$,$$,
      $$,$$,$$,$$,$$,$$,$$,$$,
      $$,$$,$$,$$,$$,$$,$$,$$,
      $$,$$,$$,$$,$$,$$,$$,$$,
      $$,$$,$$,$$,$$,$$,$$,$$,
      $$,$$,$$,$$,$$,$$,$$,$$,
      $$,$$,$$,$$,$$,$$,$$,$$,
    ]));
  });

  it("tile", function() {
    canvas.clear([　$$, __, 8 ]);

    expect(canvas.toIndexedColor()).to.eql(new Uint8Array([
      __,$$,__,$$,__,$$,__,$$,
      $$,__,$$,__,$$,__,$$,__,
      __,$$,__,$$,__,$$,__,$$,
      $$,__,$$,__,$$,__,$$,__,
      __,$$,__,$$,__,$$,__,$$,
      $$,__,$$,__,$$,__,$$,__,
      __,$$,__,$$,__,$$,__,$$,
      $$,__,$$,__,$$,__,$$,__,
    ]));
  });

  it("monotone", function() {
    canvas.clear([　__, __, 0 ]);

    expect(canvas.toIndexedColor()).to.eql(new Uint8Array([
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
    ]));
  });

  it("function", function() {
    canvas.clear(function(x, y) {
      return y & 1 ? $$ : -1;
    });

    expect(canvas.toIndexedColor()).to.eql(new Uint8Array([
      __,__,__,__,__,__,__,__,
      $$,$$,$$,$$,$$,$$,$$,$$,
      __,__,__,__,__,__,__,__,
      $$,$$,$$,$$,$$,$$,$$,$$,
      __,__,__,__,__,__,__,__,
      $$,$$,$$,$$,$$,$$,$$,$$,
      __,__,__,__,__,__,__,__,
      $$,$$,$$,$$,$$,$$,$$,$$,
    ]));
  });

  it("invalid value", function() {
    canvas.clear("blue");

    expect(canvas.toIndexedColor()).to.eql(new Uint8Array([
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
      __,__,__,__,__,__,__,__,
    ]));
  });

});
