!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.gretro=t()}}(function(){return function t(n,i,e){function o(a,s){if(!i[a]){if(!n[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=i[a]={exports:{}};n[a][0].call(c.exports,function(t){var i=n[a][1][t];return o(i?i:t)},c,c.exports,t,n,i,e)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<e.length;a++)o(e[a]);return o}({1:[function(t,n){n.exports=t("./src/gretro")},{"./src/gretro":41}],2:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("arc",function(){throw new Error("Canvas#arc is not implemented yet.")})}},{}],3:[function(t,n){"use strict";var i=t("./dollar");n.exports=function(t,n){function e(t,a,s){if(t=0|n.defaults(t,640),a=0|n.defaults(a,400),e.isCanvasRGB(t,a,s))return new o(t,a,s);if(e.isCanvasRGBA(t,a,s))return new r(t,a,s);var u=i(t,a,1,s);u.putPixel=function(n,i,e){var o=i*t+n;if(!u.mask||0!==u.mask[o]){var r=e.valueOf(n,i);-1!==r&&(u.data[o]=15&r)}},this.$=u}function o(t,e,o){t=0|n.defaults(t,640),e=0|n.defaults(e,400);var r=i(t,e,3,o);r.putPixel=function(n,i,e){var o=i*t+n;if(!r.mask||0!==r.mask[o]){var a=e.valueOf(n,i);if(-1!==a){var s=3*a,u=r.colorPalette;o*=3,r.data[o]=u[s],r.data[o+1]=u[s+1],r.data[o+2]=u[s+2]}}},this.$=r}function r(t,e,o){t=0|n.defaults(t,640),e=0|n.defaults(e,400);var r=i(t,e,4,o);r.putPixel=function(n,i,e){var o=i*t+n;if(!r.mask||0!==r.mask[o]){var a=e.valueOf(n,i);if(-1!==a){var s=3*a,u=r.colorPalette;o*=4,r.data[o]=u[s],r.data[o+1]=u[s+1],r.data[o+2]=u[s+2]}}},this.$=r}e.isCanvasRGB=function(t,n,i){return i&&i.length===t*n*3},e.isCanvasRGBA=function(t,n,i){return i&&i.length===t*n*4},n.extend(o,e),n.extend(r,o),t.Canvas=e,t.CanvasRGB=o,t.CanvasRGBA=r,e.addMethod=function(t,i){n.addMethod(e.prototype,t,i)},o.addMethod=function(t,i){n.addMethod(o.prototype,t,i)},r.addMethod=function(t,i){n.addMethod(r.prototype,t,i)}}},{"./dollar":9}],4:[function(t,n){"use strict";n.exports=function(t,n){function i(t,n,i,e){for(var o=i,r=0,a=-3*i+3;o>=r;)e(o,r),a>=0&&(a-=4*--o),a+=4*++r+2}function e(t,e,o,r,a){i(e,o,r,function(i,r){n.putLine(t,e-i,e+i,o-r,a),n.putLine(t,e-i,e+i,o+r,a),n.putLine(t,e-r,e+r,o-i,a),n.putLine(t,e-r,e+r,o+i,a)})}function o(t,e,o,r,a){i(e,o,r,function(i,r){n.putPixel(t,e+i,o+r,a),n.putPixel(t,e-i,o+r,a),n.putPixel(t,e+i,o-r,a),n.putPixel(t,e-i,o-r,a),n.putPixel(t,e+r,o+i,a),n.putPixel(t,e-r,o+i,a),n.putPixel(t,e+r,o-i,a),n.putPixel(t,e-r,o-i,a)})}t.Canvas.addMethod("circle",function(t,i,r){t=0|t,i=0|i,r=0|r,n.fill(this,function(n){e(this,t,i,r,n)}),n.stroke(this,function(n){o(this,t,i,r,n)})})}},{}],5:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("clear",function(){n.fill(this,function(t){for(var n=this.$.width,i=this.$.height,e=0;i>e;e++)for(var o=0;n>o;o++)this.$.putPixel(o,e,t)})})}},{}],6:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("clip",function(t,n,i,e){t=0|t,n=0|n,i=0|i,e=0|e,this.$.minX=Math.max(0,Math.min(t,i)),this.$.minY=Math.max(0,Math.min(n,e)),this.$.maxX=Math.min(Math.max(t,i)-1,this.$.width-1),this.$.maxY=Math.min(Math.max(n,e)-1,this.$.height-1)})}},{}],7:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("clone",function(){var n=new t.Canvas(this.$.width,this.$.height,new Uint8Array(this.$.data));return n.$.strokeColor=this.$.strokeColor,n.$.fillColor=this.$.fillColor,n.$.colorPalette.set(this.$.colorPalette),n.$.tilePalette.set(this.$.tilePalette),n})}},{}],8:[function(t,n){"use strict";n.exports=function(t){function n(t,n,i,e,o){for(var r=new Uint8Array(e*o),a=0;o>a;a++)r.set(i(n(a)),a*e);return[e,o,r]}function i(t,i,s,u,c){i=Math.max(0,Math.min(i,t.width-1)),u=Math.max(0,Math.min(u,t.width-1)),s=Math.max(0,Math.min(s,t.height-1)),c=Math.max(0,Math.min(c,t.height-1));var f=Math.abs(u-i)+1,h=Math.abs(c-s)+1,d=c>=s?e(i,s,t.width):o(i,s,t.width),l=u>=i?r(t.data,f,t.pixelSize):a(t.data,f,t.pixelSize);return n(t,d,l,f,h)}function e(t,n,i){return function(e){return(n+e)*i+t}}function o(t,n,i){return function(e){return(n-e)*i+t}}function r(t,n,i){return function(e){return t.subarray(e*i,(e+n)*i)}}function a(t,n,i){return function(e){for(var o=new Uint8Array(n*i),r=0;n>r;r++)for(var a=0;i>a;a++)o[r*i+a]=t[(e-r)*i+a];return o}}t.Canvas.addMethod("copy",function(n,e,o,r){n=0|n,e=0|e,o=0|o,r=0|r;var a=i(this.$,n,e,o,r),s=new t.Canvas(a[0],a[1],a[2]);return s.$.colorPalette.set(this.$.colorPalette),s.$.tilePalette.set(this.$.tilePalette),s})}},{}],9:[function(t,n){"use strict";var i=new Uint8Array([0,0,0,0,0,119,119,0,0,119,0,119,0,119,0,0,119,119,119,119,0,119,119,119,68,68,68,0,0,255,255,0,0,255,0,255,0,255,0,0,255,255,255,255,0,255,255,255]),e=new Uint16Array([0,1,1025,1029,1285,1317,34085,34213,42405,42407,44455,44463,44975,44991,61375,61439,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);n.exports=function(t,n,o,r){var a={width:t,height:n,minX:0,minY:0,maxX:t-1,maxY:n-1,mask:null,strokeColor:0,fillColor:-1,pixelSize:o,colorPalette:new Uint8Array(i),tilePalette:new Uint16Array(e),storableKeys:["mask","minX","minY","maxX","maxY","strokeColor","fillColor"]};return a.data=r instanceof Uint8Array?r:new Uint8Array(t*n*o),a}},{}],10:[function(t,n){"use strict";n.exports=function(t,n){function i(t,n,i){i.forEach(function(i){t[i]=n[i]})}t.Canvas.addMethod("draw",function(t){if("function"==typeof t){var e={};i(e,this.$,this.$.storableKeys);var o=t.apply(this,n.slice(arguments,1));return i(this.$,e,this.$.storableKeys),void 0===o?this:o}})}},{}],11:[function(t,n){"use strict";n.exports=function(t,n){function i(t,n,i,e,o){for(var r=i,a=0,s=Math.pow(i/e,2),u=i,c=-2*u+1+2*s,f=-4*u+2+s;r>=0;)o(r,a),c>=0&&(r--,c-=4*r,f-=4*r-2),0>f&&(a++,c+=4*s*a+2*s,f+=4*s*a)}function e(t,e,o,r,a,s){i(e,o,r,a,function(i,r){n.putLine(t,e-i,e+i,o+r,s),n.putLine(t,e-i,e+i,o-r,s)})}function o(t,e,o,r,a,s){i(e,o,r,a,function(i,r){n.putPixel(t,e+i,o+r,s),n.putPixel(t,e-i,o+r,s),n.putPixel(t,e+i,o-r,s),n.putPixel(t,e-i,o-r,s)})}t.Canvas.addMethod("ellipse",function(t,i,r,a){t=0|t,i=0|i,r=0|r,a=0|a,n.fill(this,function(n){e(this,t,i,r,a,n)}),n.stroke(this,function(n){o(this,t,i,r,a,n)})})}},{}],12:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("fill",function(t){this.$.fillColor=n.colorize(t,this.$.tilePalette)})}},{}],13:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("getColor",function(t){return t=3*(15&t),n.rgb2num(this.$.colorPalette[t],this.$.colorPalette[t+1],this.$.colorPalette[t+2])})}},{}],14:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("getColorIndex",function(t,i){return t=0|t,i=0|i,n.inCanvas(this,t,i)?this.$.data[i*this.$.width+t]:-1}),t.CanvasRGB.addMethod("getColorIndex",function(){throw new Error("CanvasRGB is not supported #getColorIndex")})}},{}],15:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("getHeight",function(){return this.$.height})}},{}],16:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("getRGB",function(t,i){if(t=0|t,i=0|i,n.inCanvas(this,t,i)){var e=i*this.$.width+t,o=3*this.$.data[e],r=this.$.colorPalette;return n.rgb2num(r[o],r[o+1],r[o+2])}return-1}),t.CanvasRGB.addMethod("getRGB",function(t,i){if(t=0|t,i=0|i,n.inCanvas(this,t,i)){var e=(i*this.$.width+t)*this.$.pixelSize;return n.rgb2num(this.$.data[e],this.$.data[e+1],this.$.data[e+2])}return-1})}},{}],17:[function(t,n){"use strict";n.exports=function(t,n){function i(t,n){return t+(n<<24)>>>0}t.Canvas.addMethod("getRGBA",function(t,e,o){if(t=0|t,e=0|e,o=0|n.defaults(o,255),n.inCanvas(this,t,e)){var r=e*this.$.width+t,a=3*this.$.data[r],s=this.$.colorPalette;return i(n.rgb2num(s[a],s[a+1],s[a+2]),o)}return-1}),t.CanvasRGB.addMethod("getRGBA",function(t,e,o){if(t=0|t,e=0|e,o=0|n.defaults(o,255),n.inCanvas(this,t,e)){var r=(e*this.$.width+t)*this.$.pixelSize;return i(n.rgb2num(this.$.data[r],this.$.data[r+1],this.$.data[r+2]),o)}return-1}),t.CanvasRGBA.addMethod("getRGBA",function(t,e){if(t=0|t,e=0|e,n.inCanvas(this,t,e)){var o=(e*this.$.width+t)*this.$.pixelSize;return i(n.rgb2num(this.$.data[o],this.$.data[o+1],this.$.data[o+2]),this.$.data[o+3])}return-1})}},{}],18:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("getRawData",function(){return this.$.data})}},{}],19:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("getTile",function(t){return this.$.tilePalette[31&t]})}},{}],20:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("getWidth",function(){return this.$.width})}},{}],21:[function(t,n){"use strict";n.exports=function(n){n.use(t("./canvas")),n.use(t("./getRawData")),n.use(t("./getHeight")),n.use(t("./getWidth")),n.use(t("./getColor")),n.use(t("./setColor")),n.use(t("./getTile")),n.use(t("./setTile")),n.use(t("./getColorIndex")),n.use(t("./getRGB")),n.use(t("./getRGBA")),n.use(t("./stroke")),n.use(t("./noStroke")),n.use(t("./fill")),n.use(t("./noFill")),n.use(t("./clip")),n.use(t("./noClip")),n.use(t("./mask")),n.use(t("./noMask")),n.use(t("./clear")),n.use(t("./draw")),n.use(t("./point")),n.use(t("./line")),n.use(t("./polygon")),n.use(t("./triangle")),n.use(t("./quad")),n.use(t("./rect")),n.use(t("./arc")),n.use(t("./circle")),n.use(t("./ellipse")),n.use(t("./copy")),n.use(t("./paste")),n.use(t("./clone")),n.use(t("./toMask")),n.use(t("./toIndexedColor")),n.use(t("./toRGB")),n.use(t("./toRGBA"))}},{"./arc":2,"./canvas":3,"./circle":4,"./clear":5,"./clip":6,"./clone":7,"./copy":8,"./draw":10,"./ellipse":11,"./fill":12,"./getColor":13,"./getColorIndex":14,"./getHeight":15,"./getRGB":16,"./getRGBA":17,"./getRawData":18,"./getTile":19,"./getWidth":20,"./line":22,"./mask":23,"./noClip":24,"./noFill":25,"./noMask":26,"./noStroke":27,"./paste":28,"./point":29,"./polygon":30,"./quad":31,"./rect":32,"./setColor":33,"./setTile":34,"./stroke":35,"./toIndexedColor":36,"./toMask":37,"./toRGB":38,"./toRGBA":39,"./triangle":40}],22:[function(t,n){"use strict";n.exports=function(t,n){function i(t,i,e,o,r){if(n.inRange(o,t.minY,t.maxY))for(i=Math.max(i,t.minX),e=Math.min(e,t.maxX);e>=i;)t.putPixel(i++,o,r)}function e(t,i,e,o,r){if(n.inRange(o,t.minX,t.maxX))for(i=Math.max(i,t.minY),e=Math.min(e,t.maxY);e>=i;)t.putPixel(o,i++,r)}function o(t,n,i,e,o,r,a,s){for(var u=-e,c=0;e>=c;n+=r,c++)t.putPixel(n,i,s),u+=2*o,u>=0&&(i+=a,u-=2*e)}function r(t,n,i,e,o,r,a,s){for(var u=-o,c=0;o>=c;i+=a,c++)t.putPixel(n,i,s),u+=2*e,u>=0&&(n+=r,u-=2*o)}function a(t,n,i,e,a,s){var u=Math.abs(n-e),c=Math.abs(i-a),f=e>n?1:-1,h=a>i?1:-1;u>=c?o(t,n,i,u,c,f,h,s):r(t,n,i,u,c,f,h,s)}function s(t,n){var i=0;return n[d]<t.minX&&(i+=p),t.maxX<n[d]&&(i+=v),n[l]<t.minY&&(i+=x),t.maxY<n[l]&&(i+=$),i}function u(t,n,i,e,o){var r=(i[l]-n[l])*(e-n[d])/(i[d]-n[d])+n[l]|0;return r<t.minY||t.maxY<r?!1:(o[d]=e,o[l]=r,!0)}function c(t,n,i,e,o){var r=(i[d]-n[d])*(e-n[l])/(i[l]-n[l])+n[d]|0;return r<t.minX||t.maxX<r?!1:(o[d]=r,o[l]=e,!0)}function f(t,n,i,e,o){return 0!==(n&p)&&u(t,i,e,t.minX,o)?!0:0!==(n&v)&&u(t,i,e,t.maxX,o)?!0:0!==(n&x)&&c(t,i,e,t.minY,o)?!0:0!==(n&$)&&c(t,i,e,t.maxY,o)?!0:!1}function h(t,n,i){var e=s(t,n),o=s(t,i);return 0===e&&0===o?!0:0!==(e&o)?!1:0===e||f(t,e,n,i,n)?(0!==o&&f(t,o,n,i,i),!0):!1}t.Canvas.addMethod("line",function(t,o,r,s){t=0|t,o=0|o,r=0|r,s=0|s,n.stroke(this,function(n){if(o===s)i(this.$,Math.min(t,r),Math.max(t,r),o,n);else if(t===r)e(this.$,Math.min(o,s),Math.max(o,s),t,n);else{var u=[t,o],c=[r,s];h(this.$,u,c)&&a(this.$,u[d],u[l],c[d],c[l],n)}})});var d=0,l=1,p=1,v=2,x=4,$=8}},{}],23:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("mask",function(n){n instanceof t.Canvas&&(n=n.$.data),this.$.mask=n})}},{}],24:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("noClip",function(){this.$.minX=0,this.$.minY=0,this.$.maxX=this.$.width-1,this.$.maxY=this.$.height-1})}},{}],25:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("noFill",function(){this.$.fillColor=-1})}},{}],26:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("noMask",function(){this.$.mask=null})}},{}],27:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("noStroke",function(){this.$.strokeColor=-1})}},{}],28:[function(t,n){"use strict";n.exports=function(t){function n(t,n,i,e){for(var o=t.$.width,r=n.$.width,a=i.width,s=i.height,u=i.srcIndex,c=r*i.y+i.x,f=0;s>f;f++)e(u,c,a),u+=o,c+=r}function i(t,n,i,e,o,r){var a=0,s=i;return 0>t&&(i+=t,a-=t,t=0),0>n&&(e+=n,a-=n*s,n=0),i=Math.min(i,o-t),e=Math.min(e,r-n),{x:t,y:n,width:i,height:e,srcIndex:a}}t.Canvas.addMethod("paste",function(t,e,o){if(e=0|e,o=0|o,t&&this.constructor===t.constructor){var r=t.$.data,a=this.$.data,s=this.$.mask,u=this.$.pixelSize,c=i(e,o,t.$.width,t.$.height,this.$.width,this.$.height),f=null;f=s?function(t,n,i){for(var e=0;i>e;e++){if(0!==s[n]){var o=r.subarray(t*u,(t+1)*u);a.set(o,n*u)}t++,n++}}:function(t,n,i){var e=r.subarray(t*u,(t+i)*u);a.set(e,n*u)},n(t,this,c,f)}})}},{}],29:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("point",function(t,i){t=0|t,i=0|i,n.stroke(this,function(e){n.inClip(this,t,i)&&n.putPixel(this,t,i,e)})})}},{}],30:[function(t,n){"use strict";n.exports=function(t,n){function i(t,n){return t[x]===n[x]&&t[$]===n[$]}function e(t,n){return(n[x]-t[x])/(n[$]-t[$])}function o(t,n,i,e){var o=n[$]<i?i-t[$]:e-t[$],r=(n[x]-t[x])*o/(n[$]-t[$])+t[x]|0,a=n[$]<i?i:e;return[r,a]}function r(t,e,r){for(var a=[],s=t.length,u=1;s>=u;u++){var c=t[u-1],f=t[u%s];i(c,f)||(n.inRange(c[$],e,r)?n.inRange(f[$],e,r)?a.push(c):a.push(c,o(c,f,e,r)):n.inRange(f[$],e,r)?a.push(o(f,c,e,r)):a.push(o(f,c,e,r),o(c,f,e,r)))}return a}function a(t){var n=[];if(0===t.length)return n;for(var i=t.length,o=1,r=0;i>r;r++){var a=t[r].slice(),s=t[(r+1)%i].slice();if(a[$]!==s[$]){var u=[a[$]<s[$]?a[x]:s[x],0,0,e(a,s),a[$]<s[$]?1:-1,o++];u[m]=Math.min(a[$],s[$]),u[C]=Math.max(a[$],s[$]),n.push(u)}}return n}function s(t){return function(i){return n.inRange(t,i[m],i[C])}}function u(t,n){return t[x]-n[x]}function c(t,n){return t[g]===n[g]}function f(t,n,i){return 1===Math.abs(t[w]%i-n[w])}function h(t,n,i){return 0===n||!c(i[n],i[n-1])||!f(i[n],i[n-1],i.length)}function d(t){return t[x]}function l(t){t[x]+=t[M]}function p(t,i,e){var o=t.$.maxY,r=t.$.minY;i.forEach(function(t){o=Math.min(o,t[m]),r=Math.max(r,t[C])});for(var a=o;r>=a;a++){for(var c=i.filter(s(a)),f=c.sort(u).filter(h).map(d),p=1,v=f.length;v>p;p+=2){var x=f[p-1],$=f[p];n.putLine(t,Math.round(x),Math.round($),a,e)}c.forEach(l)}}function v(t,n){for(var i=n.length,e=0,o=i;o>e;e++){var r=n[e],a=n[(e+1)%i];t.line(r[x],r[$],a[x],a[$])}}t.Canvas.addMethod("polygon",function(t){t=Array.isArray(t)?t.map(function(t){return[0|t[0],0|t[1]]}):[],n.fill(this,function(n){p(this,a(r(t,this.$.minY,this.$.maxY)),n)}),n.stroke(this,function(n){v(this,t,n)})});var x=0,$=1,m=1,C=2,M=3,g=4,w=5}},{}],31:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("quad",function(t,n,i,e,o,r,a,s){t=0|t,n=0|n,i=0|i,e=0|e,o=0|o,r=0|r,a=0|a,s=0|s,this.polygon([[t,n],[i,e],[o,r],[a,s]])})}},{}],32:[function(t,n){"use strict";n.exports=function(t,n){function i(t,i,e,o,r,a){for(var s=e;r>=s;s++)n.putLine(t,i,o,s,a)}function e(t,n,i,e,o){t.line(n,i,e,i),t.line(e,i,e,o),t.line(e,o,n,o),t.line(n,o,n,i)}t.Canvas.addMethod("rect",function(t,o,r,a){t=0|t,o=0|o,r=0|r,a=0|a;var s=Math.abs(r)-1,u=Math.abs(a)-1,c=r>=0?1:-1,f=a>=0?1:-1,h=1===c?t:t+s*c,d=-1===c?t:t+s*c,l=1===f?o:o+u*f,p=-1===f?o:o+u*f;n.fill(this,function(t){i(this,h,l,d,p,t)}),n.stroke(this,function(t){e(this,h,l,d,p,t)})})}},{}],33:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("setColor",function(t,n){t=3*(15&t),this.$.colorPalette[t]=17*(n>>20&15),this.$.colorPalette[t+1]=17*(n>>12&15),this.$.colorPalette[t+2]=17*(n>>4&15)})}},{}],34:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("setTile",function(t,i){t=31&t,i=65535&i,n.inRange(t,0,15)||(this.$.tilePalette[t]=i)})}},{}],35:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("stroke",function(t){this.$.strokeColor=n.colorize(t,this.$.tilePalette)})}},{}],36:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("toIndexedColor",function(){return new Uint8Array(this.$.data)}),t.CanvasRGB.addMethod("toIndexedColor",function(){throw new Error("CanvasRGB is not supported #toIndexedColor")})}},{}],37:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("toMask",function(){for(var t=this.$.data,n=new Uint8Array(t.length),i=0,e=n.length;e>i;i++)n[i]=t[i]?15:0;return n}),t.CanvasRGB.addMethod("toMask",function(){throw new Error("CanvasRGB is not supported #toMask")})}},{}],38:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("toRGB",function(){for(var t=this.$.width*this.$.height,n=new Uint8Array(3*t),i=this.$.data,e=this.$.width,o=this.$.height,r=this.$.colorPalette,a=0,s=0,u=0;o>u;u++)for(var c=0;e>c;c++){var f=3*i[a++];n[s++]=r[f],n[s++]=r[f+1],n[s++]=r[f+2]}return n}),t.CanvasRGB.addMethod("toRGB",function(){return new Uint8Array(this.$.data)}),t.CanvasRGBA.addMethod("toRGB",function(){for(var t=this.$.width*this.$.height,n=new Uint8Array(3*t),i=this.$.data,e=0,o=0,r=0;t>e;e++,r++)n[o++]=i[r++],n[o++]=i[r++],n[o++]=i[r++];return n})}},{}],39:[function(t,n){"use strict";n.exports=function(t,n){t.Canvas.addMethod("toRGBA",function(t){t=0|n.defaults(t,255);for(var i=this.$.width*this.$.height,e=new Uint8Array(4*i),o=this.$.data,r=this.$.width,a=this.$.height,s=this.$.colorPalette,u=0,c=0,f=0;a>f;f++)for(var h=0;r>h;h++){var d=3*o[u++];e[c++]=s[d],e[c++]=s[d+1],e[c++]=s[d+2],e[c++]=t}return e}),t.CanvasRGB.addMethod("toRGBA",function(t){t=0|n.defaults(t,255);for(var i=this.$.width*this.$.height,e=new Uint8Array(4*i),o=this.$.data,r=0,a=0,s=0;i>r;r++)e[a++]=o[s++],e[a++]=o[s++],e[a++]=o[s++],e[a++]=t;return e}),t.CanvasRGBA.addMethod("toRGBA",function(){return new Uint8Array(this.$.data)})}},{}],40:[function(t,n){"use strict";n.exports=function(t){t.Canvas.addMethod("triangle",function(t,n,i,e,o,r){t=0|t,n=0|n,i=0|i,e=0|e,o=0|o,r=0|r,this.polygon([[t,n],[i,e],[o,r]])})}},{}],41:[function(t,n,i){"use strict";var e=t("./utils"),o=[];i.version="0.2.2",i.use=function(t){return-1===o.indexOf(t)&&(t(this,e),o.push(t)),this},i.use(t("./canvas"))},{"./canvas":21,"./utils":50}],42:[function(t,n){"use strict";n.exports=function(t,n,i){return t[n]=function(){var t=i.apply(this,arguments);return void 0===t?this:t},this}},{}],43:[function(t,n){"use strict";function i(t,n){var i=15&t[0],e=15&t[1],o=31&t[2],r=n[o];return i===e||0===o?i:{valueOf:function(t,n){return r&1<<(3&t)+4*(3&n)?e:i}}}n.exports=function(t,n){return"number"==typeof t?-1===t?-1:15&t:Array.isArray(t)?i(t,n):"function"==typeof t?{valueOf:t}:-1}},{}],44:[function(t,n){"use strict";n.exports=function(t,n){return"undefined"==typeof t?n:t}},{}],45:[function(t,n){"use strict";n.exports=function(t,n){function i(){this.constructor=t}return Object.keys(n).forEach(function(i){t[i]=n[i]}),i.prototype=n.prototype,t.prototype=new i,t}},{}],46:[function(t,n){"use strict";n.exports=function(t,n){-1!==t.$.fillColor&&n.call(t,t.$.fillColor)}},{}],47:[function(t,n){"use strict";var i=t("./inRange");n.exports=function(t,n,e){return i(n,0,t.$.width-1)&&i(e,0,t.$.height-1)}},{"./inRange":49}],48:[function(t,n){"use strict";var i=t("./inRange");n.exports=function(t,n,e){return i(n,t.$.minX,t.$.maxX)&&i(e,t.$.minY,t.$.maxY)}},{"./inRange":49}],49:[function(t,n){"use strict";n.exports=function(t,n,i){return t>=n&&i>=t}},{}],50:[function(t,n,i){"use strict";i.addMethod=t("./addMethod"),i.extend=t("./extend"),i.inRange=t("./inRange"),i.defaults=t("./defaults"),i.rgb2num=t("./rgb2num"),i.slice=t("./slice"),i.colorize=t("./colorize"),i.inCanvas=t("./inCanvas"),i.inClip=t("./inClip"),i.putPixel=t("./putPixel"),i.putLine=t("./putLine"),i.stroke=t("./stroke"),i.fill=t("./fill")},{"./addMethod":42,"./colorize":43,"./defaults":44,"./extend":45,"./fill":46,"./inCanvas":47,"./inClip":48,"./inRange":49,"./putLine":51,"./putPixel":52,"./rgb2num":53,"./slice":54,"./stroke":55}],51:[function(t,n){"use strict";var i=t("./inRange");n.exports=function(t,n,e,o,r){var a=t.$;if(i(o,a.minY,a.maxY))for(n=Math.max(n,a.minX),e=Math.min(e,a.maxX);e>=n;)a.putPixel(n++,o,r)}},{"./inRange":49}],52:[function(t,n){"use strict";var i=t("./inRange");n.exports=function(t,n,e,o){var r=t.$;i(n,r.minX,r.maxX)&&i(e,r.minY,r.maxY)&&r.putPixel(n,e,o)}},{"./inRange":49}],53:[function(t,n){"use strict";n.exports=function(t,n,i){return(t<<16)+(n<<8)+i}},{}],54:[function(t,n){"use strict";var i=Array.prototype.slice;n.exports=function(t,n){return i.call(t,0|n)}},{}],55:[function(t,n){"use strict";n.exports=function(t,n){-1!==t.$.strokeColor&&n.call(t,t.$.strokeColor)}},{}]},{},[1])(1)});